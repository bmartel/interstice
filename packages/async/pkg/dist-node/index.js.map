{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["import { LitElement, html } from 'lit-element';\n\nclass AsyncElement extends LitElement {\n  firstUpdated() {\n    this.setup();\n  }\n\n  setup() {\n    if (!this._loadedPromise) {\n      this.reload();\n    }\n  }\n\n  loader() {\n    this._loaded = null;\n    this._errored = null;\n    this._loadedPromise = new Promise((resolve, reject) => {\n      this._resolveLoaded = resolve;\n      this._rejectLoaded = reject;\n    });\n\n    this._loadedPromise.then(data => {\n      this._loaded = () => data;\n\n      this.requestUpdate();\n      return data;\n    }).catch(err => {\n      this._errored = err;\n      this.requestUpdate();\n    });\n  }\n\n  reload() {\n    this.loader();\n    this.resolve();\n  }\n\n  loaded() {\n    return this._loaded;\n  }\n\n  errored() {\n    if (this._errored) {\n      return this.erroring(this._errored);\n    }\n\n    return null;\n  }\n\n  async resolve() {\n    try {\n      const data = await this.asyncRender();\n\n      this._resolveLoaded(data);\n\n      return data;\n    } catch (err) {\n      this._rejectLoaded(err);\n\n      return null;\n    }\n  }\n\n  erroring(err) {\n    return html``;\n  }\n\n  loading() {\n    return html``;\n  }\n\n  asyncRender() {\n    return Promise.reject('Must implement asyncRender() in child components');\n  }\n\n  render() {\n    const loaded = this.loaded();\n\n    if (loaded) {\n      return loaded();\n    }\n\n    const errored = this.errored();\n\n    if (errored) {\n      return errored;\n    }\n\n    return this.loading();\n  }\n\n}\n\nexport default AsyncElement;"],"names":["AsyncElement","LitElement","firstUpdated","setup","_loadedPromise","reload","loader","_loaded","_errored","Promise","resolve","reject","_resolveLoaded","_rejectLoaded","then","data","requestUpdate","catch","err","loaded","errored","erroring","asyncRender","html","loading","render"],"mappings":";;;;;;AAEA,MAAMA,YAAN,SAA2BC,qBAA3B,CAAsC;AACpCC,EAAAA,YAAY,GAAG;AACb,SAAKC,KAAL;AACD;;AAEDA,EAAAA,KAAK,GAAG;AACN,QAAI,CAAC,KAAKC,cAAV,EAA0B;AACxB,WAAKC,MAAL;AACD;AACF;;AAEDC,EAAAA,MAAM,GAAG;AACP,SAAKC,OAAL,GAAe,IAAf;AACA,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKJ,cAAL,GAAsB,IAAIK,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACrD,WAAKC,cAAL,GAAsBF,OAAtB;AACA,WAAKG,aAAL,GAAqBF,MAArB;AACD,KAHqB,CAAtB;;AAKA,SAAKP,cAAL,CAAoBU,IAApB,CAAyBC,IAAI,IAAI;AAC/B,WAAKR,OAAL,GAAe,MAAMQ,IAArB;;AAEA,WAAKC,aAAL;AACA,aAAOD,IAAP;AACD,KALD,EAKGE,KALH,CAKSC,GAAG,IAAI;AACd,WAAKV,QAAL,GAAgBU,GAAhB;AACA,WAAKF,aAAL;AACD,KARD;AASD;;AAEDX,EAAAA,MAAM,GAAG;AACP,SAAKC,MAAL;AACA,SAAKI,OAAL;AACD;;AAEDS,EAAAA,MAAM,GAAG;AACP,WAAO,KAAKZ,OAAZ;AACD;;AAEDa,EAAAA,OAAO,GAAG;AACR,QAAI,KAAKZ,QAAT,EAAmB;AACjB,aAAO,KAAKa,QAAL,CAAc,KAAKb,QAAnB,CAAP;AACD;;AAED,WAAO,IAAP;AACD;;AAED,QAAME,OAAN,GAAgB;AACd,QAAI;AACF,YAAMK,IAAI,GAAG,MAAM,KAAKO,WAAL,EAAnB;;AAEA,WAAKV,cAAL,CAAoBG,IAApB;;AAEA,aAAOA,IAAP;AACD,KAND,CAME,OAAOG,GAAP,EAAY;AACZ,WAAKL,aAAL,CAAmBK,GAAnB;;AAEA,aAAO,IAAP;AACD;AACF;;AAEDG,EAAAA,QAAQ,CAACH,GAAD,EAAM;AACZ,WAAOK,eAAK,EAAZ;AACD;;AAEDC,EAAAA,OAAO,GAAG;AACR,WAAOD,eAAK,EAAZ;AACD;;AAEDD,EAAAA,WAAW,GAAG;AACZ,WAAOb,OAAO,CAACE,MAAR,CAAe,kDAAf,CAAP;AACD;;AAEDc,EAAAA,MAAM,GAAG;AACP,UAAMN,MAAM,GAAG,KAAKA,MAAL,EAAf;;AAEA,QAAIA,MAAJ,EAAY;AACV,aAAOA,MAAM,EAAb;AACD;;AAED,UAAMC,OAAO,GAAG,KAAKA,OAAL,EAAhB;;AAEA,QAAIA,OAAJ,EAAa;AACX,aAAOA,OAAP;AACD;;AAED,WAAO,KAAKI,OAAL,EAAP;AACD;;AAvFmC;;;;"}